<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>梨花带裕</title>
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
  <!-- 顶部功能区 -->
    <div class="top">
        <div class="intop">
            <ul class="ulLeft">
                <li><a href="#">梨花带裕</a><span>|</span></li>
                <li><a href="#">资质证照</a><span>|</span></li>
                <li><a href="#">协议规则</a><span>|</span></li>
                <li><a href="#">下载APP</a><span>|</span></li>
                <li><a href="#">Select Location</a><span>|</span></li>
            </ul>
            <div class="cart"><a href="#">购物车（0）</a></div>
            <ul class="ulRight">
                <li><a href="#">登录</a><span>|</span></li>
                <li><a href="#">注册</a><span>|</span></li>
                <li><a href="#">消息通知</a><span>|</span></li>
                <li><a href="#">个人中心</a><span>|</span></li>
            </ul>
        </div>
    </div>
    <div class="lihua"></div>
    <!-- 功能选择区 -->
    <div class="banner">
        <ul>
            <li><a href="#">特产介绍</a></li>
            <li><a href="#">旅游攻略</a></li>
            <li><a href="#">风俗文化</a></li>
            <li><a href="#">食品工坊</a></li>
            <li><a href="#">交流社区</a></li>
        </ul>
        <form>
            <input type="text" name="search" id="search" placeholder="雪花梨">
            <button></button>
        </form>
    </div>
    <div class="navBox">
      <!-- 产品导航区 -->
        <div class="nav">
            <ul>
                <li><a href="#">梨类</a><span>&gt;</span></li>
                <li><a href="#">猕猴桃</a><span>&gt;</span></li>
                <li><a href="#">桃类</a><span>&gt;</span></li>
                <li><a href="#">蚕茧</a><span>&gt;</span></li>
                <li><a href="#">梨制产品</a><span>&gt;</span></li>
                <li><a href="#">蔬菜类</a><span>&gt;</span></li>
                <li><a href="#">李子类</a><span>&gt;</span></li>
                <li><a href="#">杏类</a><span>&gt;</span></li>
                <li><a href="#">枇杷</a><span>&gt;</span></li>
                <li><a href="#">其他水果</a><span>&gt;</span></li>
            </ul>
        </div>
        <!-- 轮播图展示区 -->
        <div class="slideshow">
            <div id="wrap">
                <!-- 图片列表 -->
                <div class="img-list">
                  <img src="images/lunbo1.jpg" />
                  <img src="images/lunbo2.jpg" />
                  <img src="images/lunbo3.jpg" />
                  <img src="images/tu1.webp" />
                  <img src="https://s1.ax1x.com/2020/09/26/0irQ0g.jpg" />
                </div>
                
                <!-- 小箭头 -->
                <div class="arrow">
                  <a href="javascript:;" class="left"><</a>
                  <a href="javascript:;" class="right">></a>
                </div>
          
                <!-- 小圆点 -->
                <ul class="circle-list">
                  <li class="circle active" data-n="0"></li>
                  <li class="circle" data-n="1"></li>
                  <li class="circle" data-n="2"></li>
                  <li class="circle" data-n="3"></li>
                  <li class="circle" data-n="4"></li>
                </ul>
              </div>
        </div>
    </div>
    <!-- 功能导图区 -->
    <div class="box">
        <ul>
            <li>1</li>
            <li>2</li>
            <li class="last"><div></div><span>鸳溪旅游导图</span></li>
        </ul>
    </div>
    <!-- 热门农场模块区 -->
    <div class="details">
        <div class="title"><span>||||</span>热门农场</div>
        <!-- 农场1板块 -->
        <div class="farm1">
            <!-- 农场1图片 -->
            <div class="fimg1"></div>
            <!-- 农场1简介 -->
            <div class="fcontent1">
              <h3>宝民家庭农场</h3>
              <p>成立于2017-04-18，经营者:王光杰<br/>
              统一社会信用代码:92510824MA65PA0Y43<br/>
              地理位置:苍溪县鸳溪镇民中村一组
              </p>
            </div>
        </div>
        <!-- 农场2板块 -->
        <div class="farm1">
          <div class="fimg1"></div>
          <div class="fcontent1">
            <h3>科源家庭农场</h3>
            <p>
              成立于2017-04-12，经营者:张国政<br>
              统一社会信用代码为92510824MA63XW7L4U<br>
              地理位置:苍溪县鸳溪镇学堂村5组
            </p>
          </div>
      </div>
    </div>
    <!-- 底部信息区 -->
    <div class="footer">
        <div class="content">
            <div><h3>咨询热线</h3>666-163257</div>
            <div><h3>快速链接</h3>公司简介<br>合作伙伴<br>工作机会<br>友情链接</div>
            <div><h3>关于我们</h3>公司招聘<br>商务合作<br>联系客服<br>快速咨询</div>
        </div>
        <div class="bottom">COPYRIGHT 02013-现在川ICP号-61CP证书：川B2-666666</div>
    </div>
    <!-- 侧边栏 -->
    <div class="sidebar">
        <div>手机APP</div>
        <div>个人中心</div>
        <div>人工客服</div>
        <div>购物车</div>
    </div>
    <script>
        // 获取左右按钮和图片列表
        let oLeft = document.querySelector(".left");
        let oRight = document.querySelector(".right");
        let oImgList = document.querySelector(".img-list");
  
        // 克隆第一张图片
        let clonefirstImg = oImgList.firstElementChild.cloneNode();
        // 将第一张图片添加至图片列表的末尾
        oImgList.appendChild(clonefirstImg);
  
        // 图片索引 代表当前是第几张图片  index:0代表第一张图片
        let index = 0;
  
        // 设置函数节流锁
        let lock = true;
        function handleRightBtn() {
          if (!lock) return;
          index++;
          oImgList.style.left = index * -976 + "px";
          // 为什么要加过渡? 因为切换到了最后一张假图时会将过渡去掉
          oImgList.style.transition = "0.5s ease";
  
          if (index === 5) {
            index = 0;
            setTimeout(() => {
              oImgList.style.left = 0;
              // 取消过渡 4秒之后切换第一张
              oImgList.style.transition = "none";
            }, 4000);
          }
  
          // 设置小圆点的高亮
          setCircles();
          // 关锁
          lock = false;
          setTimeout(() => {
            lock = true;
          }, 4000);
        }
  
        // 右按钮的实现
        oRight.addEventListener("click", handleRightBtn);
  
        // 左按钮的实现  瞬间切换到假图然后拉到真实最后一张图片
        oLeft.addEventListener("click", () => {
          if (!lock) return;
          index--;
          if (index === -1) {
            oImgList.style.left = 5 * -976 + "px";
            oImgList.style.transition = "none";
            index = 4;
            setTimeout(() => {
              oImgList.style.left = index * -976 + "px";
              oImgList.style.transition = "0.5s ease";
            }, 0);
          } else {
            oImgList.style.left = index * -976 + "px";
          }
  
          // 设置小圆点的高亮
          setCircles();
  
          lock = false;
          setTimeout(() => {
            lock = true;
          }, 500);
        });
  
        // 获取五个小圆点
        const circles = document.querySelectorAll(".circle");
  
        // 小圆点高亮的显示
        function setCircles() {
          for (let i = 0; i < circles.length; i++) {
            if (i === index) {
              circles[i].classList.add("active");
            } else {
              circles[i].classList.remove("active");
            }
          }
        }
  
        // 小圆点点击切换图片 使用事件代理
        const oCircle = document.querySelector(".circle-list");
        oCircle.addEventListener("click", (e) => {
          // 当我点击小圆点的时候
          if (e.target.nodeName.toLowerCase() === "li") {
            // 当前元素的data-n对应得值 和index一一对应
            const n = Number(e.target.getAttribute("data-n"));
            index = n;
            setCircles();
            oImgList.style.transition = "0.5s ease";
            oImgList.style.left = index * -976 + "px";
          }
        });
  
        // 自动轮播
        let autoplay = setInterval(handleRightBtn, 2000);
        const oWrap = document.getElementById("wrap");
        // 移入停止轮播
        oWrap.addEventListener("mouseenter", () => {
          clearInterval(autoplay);
        });
        // 移出继续轮播
        oWrap.addEventListener("mouseleave", () => {
          // 设表先关
          clearInterval(autoplay);
          autoplay = setInterval(handleRightBtn, 2000);
        });
      </script>
</body>
</html>